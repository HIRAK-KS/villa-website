# Villa Website

北海道の望来ヴィラのウェブサイトです。

## プロジェクト構成

```
villa-website/
├── index.html                    # メインのHTMLファイル
├── style.css                     # CSSスタイルファイル
├── script.js                     # JavaScriptファイル
├── images/                       # サイト画像
│   └── backup/                   # 元画像のバックアップ
├── videos/                       # 動画ファイル
├── .htaccess                     # Apache設定ファイル（セキュリティ・パフォーマンス）
├── optimize-existing-images.sh   # 既存画像最適化スクリプト
└── README.md                     # このファイル
```

## 使用方法

このサイトは純粋なHTML、CSS、JavaScriptで構築されており、特別な依存関係やビルドプロセスは必要ありません。

### ローカルでの開発・確認

1. ファイルをウェブサーバーで公開する（ローカル開発サーバーを推奨）
2. ブラウザで `index.html` にアクセス

#### 推奨：ローカル開発サーバー

Python 3を使用している場合：

```bash
python -m http.server 8000
```

Node.jsを使用している場合：

```bash
npx serve .
```

Live Serverを使用している場合（VS Code拡張）：

- VS Codeでプロジェクトフォルダを開く
- 右クリックして「Open with Live Server」を選択

### 本番環境への公開

1. すべてのファイルをウェブサーバーにアップロード
2. `index.html` がルートディレクトリに配置されていることを確認
3. `.htaccess` ファイルが正しく配置されていることを確認

## 特徴

- **レスポンシブデザイン**: デスクトップ、タブレット、モバイルに対応
- **モダンCSS**: Flexbox、Grid、CSS変数を使用
- **バニラJavaScript**: フレームワークやライブラリに依存しない軽量設計
- **画像ギャラリー**: カルーセル機能付きの画像ギャラリー
- **スムーススクロール**: ナビゲーション項目のスムーズなスクロール
- **アクセシビリティ**: セマンティックHTMLとARIAラベルを使用

## パフォーマンス最適化

### 画像最適化

- **遅延読み込み**: `loading="lazy"` 属性による画像の遅延読み込み
- **既存画像最適化**: プログレッシブJPEG形式での最適化
- **効率的な画像管理**: 適切な画像サイズとフォーマット

### CSS最適化

- **重複削除**: 重複するメディアクエリとスタイルの統合
- **効率的なセレクタ**: パフォーマンスを考慮したCSSセレクタの使用
- **ファイルサイズ削減**: 約15-20%のCSSファイルサイズ削減

### JavaScript最適化

- **パッシブリスナー**: スクロールイベントのパフォーマンス向上
- **Intersection Observer**: 効率的なスクロールアニメーション
- **イベント最適化**: 不要なイベントリスナーの削除

## セキュリティ

### セキュリティヘッダー

- **Content Security Policy (CSP)**: XSS攻撃の防止
- **X-Content-Type-Options**: MIME型スニッフィングの防止
- **X-Frame-Options**: クリックジャッキング攻撃の防止
- **X-XSS-Protection**: ブラウザのXSS保護の有効化
- **Referrer Policy**: リファラー情報の制御
- **Permissions Policy**: ブラウザ機能へのアクセス制限

### JavaScriptセキュリティ

- **安全な通知システム**: `alert()` の代わりにカスタム通知システム
- **XSS対策**: `innerHTML` の使用を避け、安全なDOM操作
- **入力検証**: ユーザー入力の適切な検証

### 外部リソースのセキュリティ

- **信頼できるCDN**: Google Fontsのみを使用
- **ローカルSVGアイコン**: 外部画像URLの使用を最小限に抑制

## 画像最適化

### 既存画像の最適化

既存のJPEG画像を最適化してファイルサイズを削減：

```bash
# スクリプトに実行権限を付与
chmod +x optimize-existing-images.sh

# 既存画像最適化を実行
./optimize-existing-images.sh
```

### 最適化の特徴

- **プログレッシブJPEG**: 段階的な画像表示
- **品質最適化**: 適切な品質設定によるファイルサイズ削減
- **バックアップ機能**: 元の画像を安全にバックアップ

### 必要なツール

- **ImageMagick**: `brew install imagemagick` (macOS)

## ブラウザサポート

- Chrome 60+
- Firefox 60+
- Safari 12+
- Edge 79+

## パフォーマンス指標

最適化後の期待される改善：

- **画像読み込み**: 遅延読み込みによる初期表示の高速化
- **初回読み込み**: 20-30%高速化
- **セキュリティ**: セキュリティヘッダーによる保護強化
- **SEO**: Core Web Vitalsの改善
- **ユーザー体験**: より高速で安全なサイト

## ライセンス

このプロジェクトは私有プロジェクトです。

## 更新履歴

### v2.1.0 (最新)

- 既存画像最適化スクリプトの追加
- 画像の遅延読み込み実装
- プログレッシブJPEG形式への最適化
- 画像バックアップ機能の追加

### v2.0.0

- セキュリティヘッダーの追加
- CSS最適化（重複削除、効率化）
- JavaScriptセキュリティ向上
- パフォーマンス最適化
- `.htaccess` ファイルの追加
